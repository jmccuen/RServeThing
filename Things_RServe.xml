<?xml version="1.0" encoding="UTF-8" standalone="no"?><Entities build="b11" majorVersion="8" minorVersion="0" modelPersistenceProviderPackage="NeoPersistenceProviderPackage" revision="0" schemaVersion="1000"><Things><Thing description="" documentationContent="" effectiveThingPackage="RServeThingPackage" enabled="true" homeMashup="" identifier="" lastModifiedDate="2017-09-08T08:19:57.432-05:00" name="RServe" projectName="" published="false" tags="" thingTemplate="RServeThing" valueStream=""><Owner name="Administrator" type="User"/><avatar/><DesignTimePermissions><Create/><Read/><Update/><Delete/><Metadata/></DesignTimePermissions><RunTimePermissions/><VisibilityPermissions><Visibility/></VisibilityPermissions><ConfigurationTables><ConfigurationTable description="Connection Monitoring Settings" isMultiRow="false" name="ConnectionMonitoring" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition aspect.defaultValue="30000.0" aspect.friendlyName="Monitor Rate (seconds)" baseType="NUMBER" description="Monitor rate in milliseconds" name="connectionMonitorRate" ordinal="1"/><FieldDefinition aspect.defaultValue="false" aspect.friendlyName="Enable Monitoring" baseType="BOOLEAN" description="Enable connection monitoring" name="enableMonitor" ordinal="0"/><FieldDefinition aspect.defaultValue="1.0" aspect.friendlyName="Number of Retries" baseType="NUMBER" description="Number of retries" name="numberOfRetries" ordinal="2"/><FieldDefinition aspect.defaultValue="2000.0" aspect.friendlyName="Retry Delay (milliseconds)" baseType="NUMBER" description="Retry delay in milliseconds" name="retryDelay" ordinal="3"/></FieldDefinitions></DataShape><Rows><Row><retryDelay>2000.0</retryDelay><connectionMonitorRate>30000.0</connectionMonitorRate><numberOfRetries>1.0</numberOfRetries><enableMonitor>false</enableMonitor></Row></Rows></ConfigurationTable><ConfigurationTable description="" isMultiRow="false" name="RServeConfiguration" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition aspect.defaultValue="localhost" baseType="STRING" description="host address for the RServe Server" name="host" ordinal="0"/><FieldDefinition baseType="PASSWORD" description="" name="password" ordinal="3"/><FieldDefinition aspect.defaultValue="6311" baseType="INTEGER" description="Port for the RServe Server" name="port" ordinal="1"/><FieldDefinition baseType="STRING" description="" name="username" ordinal="2"/></FieldDefinitions></DataShape><Rows><Row><password/><port>6311</port><host><![CDATA[localhost]]></host><username/></Row></Rows></ConfigurationTable></ConfigurationTables><ThingShape><PropertyDefinitions/><ServiceDefinitions><ServiceDefinition aspect.isAsync="false" category="" description="" isAllowOverride="false" isLocalOnly="false" isOpen="false" isPrivate="false" name="Count"><ResultType baseType="INFOTABLE" description="" name="result" ordinal="0"/><ParameterDefinitions/></ServiceDefinition><ServiceDefinition aspect.isAsync="false" category="" description="" isAllowOverride="false" isLocalOnly="false" isOpen="false" isPrivate="false" name="TelefonicaJSWrapper"><ResultType aspect.dataShape="TestTelefonicsNew" baseType="INFOTABLE" description="" name="result" ordinal="0"/><ParameterDefinitions/></ServiceDefinition><ServiceDefinition aspect.isAsync="false" category="" description="" isAllowOverride="false" isLocalOnly="false" isOpen="false" isPrivate="false" name="TelefonicaRScript"><ResultType baseType="INFOTABLE" description="" name="result" ordinal="0"/><ParameterDefinitions><FieldDefinition aspect.dataShape="TelefonicaDataShape" baseType="INFOTABLE" description="" name="data" ordinal="1"/></ParameterDefinitions></ServiceDefinition></ServiceDefinitions><EventDefinitions/><ServiceMappings/><ServiceImplementations><ServiceImplementation description="" handlerName="Script" name="Count"><ConfigurationTables><ConfigurationTable description="Script" isMultiRow="false" name="Script" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><code><![CDATA[
// result: INFOTABLE dataShape: "undefined"
var result = me.TelefonicaJSWrapper();


var params = {
	t: result /* INFOTABLE */,
	columns: "value" /* STRING */,
	aggregates: "COUNT" /* STRING */,
	groupByColumns: undefined /* STRING */
};

// result: INFOTABLE
var result = Resources["InfoTableFunctions"].Aggregate(params);

]]></code></Row></Rows></ConfigurationTable></ConfigurationTables></ServiceImplementation><ServiceImplementation description="" handlerName="Script" name="TelefonicaJSWrapper"><ConfigurationTables><ConfigurationTable description="Script" isMultiRow="false" name="Script" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><code><![CDATA[
// result: INFOTABLE dataShape: TelefonicaDataShape
var data = Things["Main.FileRepository"].ParseTelefonicaData();


var params = {
	data: data /* INFOTABLE */
};

// result: INFOTABLE dataShape: "undefined"
var result = me.TelefonicaRScript(params);]]></code></Row></Rows></ConfigurationTable></ConfigurationTables></ServiceImplementation><ServiceImplementation description="" handlerName="R" name="TelefonicaRScript"><ConfigurationTables><ConfigurationTable description="R" isMultiRow="false" name="R" ordinal="0"><DataShape><FieldDefinitions><FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/></FieldDefinitions></DataShape><Rows><Row><code><![CDATA[agg_data <- aggregate(as.numeric(data$value), by=list(datetime=data$datetime), FUN=sum)
names(agg_data) <- c("datetime","value")

quantiles <- quantile(agg_data$value)
agg_data$code <- sapply(agg_data$value,  FUN=function(x){ min(which(quantiles >= x)) })

result = agg_data



]]></code></Row></Rows></ConfigurationTable></ConfigurationTables></ServiceImplementation></ServiceImplementations><Subscriptions/></ThingShape><PropertyBindings/><RemotePropertyBindings/><RemoteServiceBindings/><RemoteEventBindings/><AlertConfigurations/><ImplementedShapes/><ThingProperties/><ConfigurationChanges><ConfigurationChange changeAction="CREATE" changeReason="header : name : updated, thingTemplate : updated&#10;" timestamp="2017-09-07T20:16:47.967-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : TelefonicaRScript : Code Updated, ServiceType updated, Output Updated, Inputs updated, Service Added,  : Input parameter data Added&#10;" timestamp="2017-09-07T20:17:57.609-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : TelefonicaJSWrapper : Code Updated, Output Updated, Service Added&#10;" timestamp="2017-09-07T20:18:28.136-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : TelefonicaRScript : Output Updated, Code Updated&#10;" timestamp="2017-09-07T20:21:27.028-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T20:21:41.147-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T20:21:58.046-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T20:22:11.225-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services :  : Code Updated, Output Updated, Count : Service Added&#10;" timestamp="2017-09-07T21:44:49.616-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : TelefonicaJSWrapper : Output Updated&#10;" timestamp="2017-09-07T23:32:45.500-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:32:48.079-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : TelefonicaJSWrapper : Code Updated&#10;" timestamp="2017-09-07T23:34:51.686-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : TelefonicaJSWrapper : Output Updated&#10;" timestamp="2017-09-07T23:34:56.322-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : TelefonicaJSWrapper : Output Updated&#10;" timestamp="2017-09-07T23:35:34.378-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:37:27.280-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:38:43.009-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:39:13.180-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:39:24.885-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:39:41.494-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : TelefonicaJSWrapper : Output Updated&#10;" timestamp="2017-09-07T23:39:55.471-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:40:07.406-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:40:21.068-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : TelefonicaJSWrapper : Output Updated&#10;" timestamp="2017-09-07T23:41:54.200-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : TelefonicaJSWrapper : Code Updated&#10;" timestamp="2017-09-07T23:43:36.462-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:49:28.074-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:50:11.910-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:50:36.401-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:50:56.181-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:53:12.002-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:54:42.026-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:54:53.075-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:54:59.950-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:55:17.992-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-07T23:56:34.912-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-09-08T00:04:25.047-05:00" user="Administrator"/><ConfigurationChange changeAction="MODIFY" changeReason="services : TelefonicaRScript : Output Updated&#10;" timestamp="2017-09-08T08:19:57.423-05:00" user="Administrator"/></ConfigurationChanges></Thing></Things></Entities>